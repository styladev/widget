/*! Styla Widget v2.5.0 | (c) 2016-2017 Styla GmbH | https://github.com/styladev/widget/blob/master/license.md */
!function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){(function(n){!function(t){if("object"==typeof i&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof n?r=n:"undefined"!=typeof self&&(r=self),r.Âµ=t()}}(function(){return function e(i,n,r){function o(s,l){if(!n[s]){if(!i[s]){var d="function"==typeof t&&t;if(!l&&d)return d(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};i[s][0].call(f.exports,function(t){var e=i[s][1][t];return o(e?e:t)},f,f.exports,e,i,n,r)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,i){"use strict";var n="[object Microbe-Http]",r={},o=t("./version")+"-http";t("./modules/http")(r),Object.defineProperty(r,"version",{get:function(){return o}}),Object.defineProperty(r,"type",{get:function(){return n}}),e.exports=r},{"./modules/http":9,"./version":10}],2:[function(t,e,i){(function(t){function i(){for(;r.next;){r=r.next;var t=r.task;r.task=void 0;var e=r.domain;e&&(r.domain=void 0,e.enter());try{t()}catch(n){if(l)throw e&&e.exit(),setTimeout(i,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}a=!1}function n(e){o=o.next={task:e,domain:l&&t.domain,next:null},a||(a=!0,s())}var r={task:void 0,next:null},o=r,a=!1,s=void 0,l=!1;if("undefined"!=typeof t&&t.nextTick)l=!0,s=function(){t.nextTick(i)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,i):function(){setImmediate(i)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=i,s=function(){d.port2.postMessage(0)}}else s=function(){setTimeout(i,0)};e.exports=n}).call(this,t("_process"))},{_process:3}],3:[function(t,e,i){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var i=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,i){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(t,e,i){"use strict";function n(t){function e(t){return null===l?void u.push(t):void a(function(){var e=l?t.onFulfilled:t.onRejected;if(null===e)return void(l?t.resolve:t.reject)(d);var i;try{i=e(d)}catch(n){return void t.reject(n)}t.resolve(i)})}function i(t){try{if(t===f)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void o(e.bind(t),i,n)}l=!0,d=t,s()}catch(r){n(r)}}function n(t){l=!1,d=t,s()}function s(){for(var t=0,i=u.length;i>t;t++)e(u[t]);u=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var l=null,d=null,u=[],f=this;this.then=function(t,i){return new f.constructor(function(n,o){e(new r(t,i,n,o))})},o(t,i,n)}function r(t,e,i,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=i,this.reject=n}function o(t,e,i){var n=!1;try{t(function(t){n||(n=!0,e(t))},function(t){n||(n=!0,i(t))})}catch(r){if(n)return;n=!0,i(r)}}var a=t("asap");e.exports=n},{asap:2}],6:[function(t,e,i){"use strict";var n=t("./core.js"),r=t("asap");e.exports=n,n.prototype.done=function(t,e){var i=arguments.length?this.then.apply(this,arguments):this;i.then(null,function(t){r(function(){throw t})})}},{"./core.js":5,asap:2}],7:[function(t,e,i){"use strict";function n(t){this.then=function(e){return"function"!=typeof e?this:new r(function(i,n){o(function(){try{i(e(t))}catch(r){n(r)}})})}}var r=t("./core.js"),o=t("asap");e.exports=r,n.prototype=r.prototype;var a=new n(!0),s=new n(!1),l=new n(null),d=new n(void 0),u=new n(0),f=new n("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return l;if(void 0===t)return d;if(t===!0)return a;if(t===!1)return s;if(0===t)return u;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(i){return new r(function(t,e){e(i)})}return new n(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,i){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){n(o,t)},i)}e[o]=a,0===--r&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)n(o,e[o])})},r.reject=function(t){return new r(function(e,i){i(t)})},r.race=function(t){return new r(function(e,i){t.forEach(function(t){r.resolve(t).then(e,i)})})},r.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":5,asap:2}],8:[function(t,e,i){"use strict";var n=t("./core.js"),r=t("asap");e.exports=n,n.denodeify=function(t,e){return e=e||1/0,function(){var i=this,r=Array.prototype.slice.call(arguments);return new n(function(n,o){for(;r.length&&r.length>e;)r.pop();r.push(function(t,e){t?o(t):n(e)});var a=t.apply(i,r);!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then||n(a)})}},n.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),i="function"==typeof e[e.length-1]?e.pop():null,o=this;try{return t.apply(this,arguments).nodeify(i,o)}catch(a){if(null===i||"undefined"==typeof i)return new n(function(t,e){e(a)});r(function(){i.call(o,a)})}}},n.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(i){r(function(){t.call(e,null,i)})},function(i){r(function(){t.call(e,i)})})}},{"./core.js":5,asap:2}],9:[function(t,e,i){e.exports=function(e){"use strict";var i=t("promise");e.http=function(t){var e,n,r,o,a,s,l,d;if(!t)return new Error("No parameters given");if("string"==typeof t&&(t={url:t}),e=new XMLHttpRequest,n=t.method||"GET",r=t.url,o=JSON.stringify(t.data)||null,a=t.user||"",s=t.password||"",l=t.headers||null,d="boolean"==typeof t.async?t.async:!0,e.onreadystatechange=function(){return 4===e.readyState?e:void 0},e.open(n,r,d,a,s),"POST"===n&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l)for(var u in l)e.setRequestHeader(u,l[u]);if(d)return new i(function(t,i){e.onerror=function(){i(new Error("Network error!"))},e.send(o),e.onload=function(){200===e.status?t(e.response):i(new Error(e.status))}});var f=function(t){var e={then:function(i){return 200===t.status&&i(t.responseText),e},"catch":function(i){return 200!==t.status&&i({status:t.status,statusText:t.statusText}),e}};return e};return e.send(o),e.onloadend=function(){return e.onreadystatechange(),f(e)},e.onloadend()},e.http.get=function(t){return this({url:t,method:"GET"})},e.http.post=function(t,e){return this({url:t,data:e,method:"POST"})}}},{promise:4}],10:[function(t,e,i){e.exports="0.5.2"},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("/home/dukat/styla/code/widget/src/version"),s=n(a),l=t("/home/dukat/styla/code/widget/src/classes"),d=n(l),u=t("/home/dukat/styla/code/widget/src/build.tmpl"),f=n(u),c=t("microbejs/dist/microbe.http.min"),h="tiles";h=h[0].toUpperCase()+h.slice(1);var p=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.slug,o=i.api,a=void 0===o?"https://live.styla.com":o,l=i.domain,d=void 0===l?!1:l,u=i.iframe,c=void 0===u?!1:u,p=i.ignore,g=void 0===p?!1:p,y=i.limit,w=void 0===y?5:y,m=i.linkDomain,v=void 0===m?!1:m,b=i.minWidth,_=void 0===b?250:b,x=i.newTab,T=void 0===x?!1:x,k=i.offset,S=void 0===k?0:k,E=i.imageSize,A=void 0===E?400:E,C=i.storiesApi,L=void 0===C?!1:C,j=i.ignoreFonts,N=void 0===j?!1:j,O=i.tag,R=void 0===O?!1:O,P=i.category,I=void 0===P?!1:P,z=i.cta,D=void 0===z?!1:z,H=i.target,M=void 0===H?document.body:H,W=i.urlParams,Y=void 0===W?!0:W,F=i.imageApiDomain,U=void 0===F?"img.styla.com":F;if(r(this,t),M=this.checkTarget(M,_),!n)throw"Styla Widget error: No slug defined, cannot render widget";this.layout=h,this.refs={},this.api=a,this.domain=d,this.linkDomain=v,this.ignore=g,this.iframe=c,this.newTab=T,this.limit=w=g?w+1:w,this.minWidth=_,this.offset=S,this.imageSize=A,this.slug=n,this.storiesApi=L,this.ignoreFonts=N,this.tag=R,this.category=I,this.cta=D,this.target=M,this.urlParams=Y,this.imageApiDomain=U;var G=w+S;R!==!1&&I!==!1&&console.error("Styla Widget error: Both tag and category filter has been added to the configuration, but only one can be used, stories will be filtered only by tag.");var q=void 0;q=0!=R?a+"/api/feeds/tags/"+R+"?limit="+G+"&domain="+n:0!=I?a+"/api/feeds/boards/"+I+"/user/"+n+"?domain="+n:a+"/api/feeds/all?domain="+n+"&limit="+G,this.url=q,this.http.get(L||q).then(function(t){function i(t,e){var n=t.length;return e>=n?t:(t.splice(n-1,1),i(t,e))}t=JSON.parse(t),t.stories=t.stories.slice(S),t.stories=i(t.stories,w),new f["default"](e,t)}),Object.defineProperty(this,"version",{value:s["default"]})}return o(t,[{key:"attach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target;t=this.checkTarget(t,this.minWidth);var e=this.refs,i=e.styles,n=document.head,r=n.querySelector("."+d["default"].BASE_STYLES);return r&&n.removeChild(r),t.appendChild(e.wrapper),i.forEach(function(t){n.appendChild(t)}),this}},{key:"checkTarget",value:function(t,e){if("string"==typeof t&&(t=document.querySelector(t)))return t;if("undefined"==typeof t||null===t)return console.error("Styla Widget error: Cant find target element in DOM. Widget will render directly in body"),document.body;if(t.offsetWidth<e)throw"Styla Widget error: Target element too small to render widget Â¯\\_(ã)_/Â¯";return t}}]),o(t,[{key:"destroy",value:function(){var t=this.refs,e=t.styles,i=t.wrapper,n=document.head;return i.parentNode.removeChild(i),e.forEach(function(t){n.removeChild(t)}),this}}]),t}();p.prototype.http=c.http,window["StylaWidget_"+h]=p,Object.defineProperty(p,"version",{value:s["default"]}),i["default"]=p},{"/home/dukat/styla/code/widget/src/build.tmpl":3,"/home/dukat/styla/code/widget/src/classes":4,"/home/dukat/styla/code/widget/src/version":5,"microbejs/dist/microbe.http.min":1}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("/home/dukat/styla/code/widget/src/classes"),s=n(a),l=t("microbejs/dist/microbe.http.min"),d="#styla-widget p{margin:0}#styla-widget.styla-widget__wrapper{width:100%;height:100%}#styla-widget .styla-widget__container{box-sizing:border-box;position:relative;overflow:hidden;height:100%;width:100%;min-height:14em;font-size:14px}#styla-widget .styla-widget__story{margin-bottom:1em;position:relative}#styla-widget .styla-widget__link{position:absolute;width:100%;display:-moz-flex;display:-webkit-flex;display:flex;text-decoration:none;color:inherit}#styla-widget__link>div{display:inline-block}#styla-widget .styla-widget__imagewrap{background-repeat:no-repeat;background-position:50%;background-size:contain}#styla-widget .styla-widget__image{max-height:100%;max-width:100%;height:100%;object-fit:contain;opacity:0}#styla-widget .styla-widget__textwrap{display:block;-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;max-height:100%;overflow:hidden;float:left}#styla-widget .styla-widget__headlinewrap{display:flex;flex-direction:column;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}#styla-widget .styla-widget__headline,#styla-widget .styla-widget__title{line-height:1.25em;max-height:2.5em;overflow:hidden;margin-top:1em;margin-bottom:1em}#styla-widget .styla-widget__title{font-size:2em;text-align:center;margin-bottom:30px}#styla-widget .styla-widget__paragraph{font-size:1em;line-height:1.5em;overflow:hidden;position:relative;word-wrap:break-word}",u="#styla-widget.tiles .styla-widget__container{display:-moz-flex;display:-ms-flex;display:-webkit-flex;display:flex;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-moz-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;height:100%}#styla-widget.tiles .styla-widget__story{height:100%;min-height:14em;min-width:14em;display:block;float:left;-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;overflow:hidden}#styla-widget.tiles .styla-widget__link{height:100%;align-items:center}#styla-widget.tiles .styla-widget__imagewrap{display:block;position:absolute;width:100%;height:100%;top:0;background-size:cover}#styla-widget.tiles .styla-widget__image{object-fit:cover;min-width:100%}#styla-widget.tiles .styla-widget__textwrap{position:absolute;box-sizing:border-box;display:block;bottom:0;width:100%;margin-bottom:-6.5em;height:12.5em;transition:margin .2s ease;padding:1em;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.65) 100%)}#styla-widget.tiles .styla-widget__story:hover .styla-widget__textwrap{margin-bottom:0}#styla-widget.tiles .styla-widget__headlinewrap{height:5em;display:-moz-flex;display:-ms-flex;display:-webkit-flex;display:flex;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}#styla-widget.tiles .styla-widget__headline{font-size:1.9em;line-height:1.25em;max-height:2.5em;overflow:hidden;margin:0 0 .25em;word-wrap:break-word;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;color:#fff!important;text-shadow:1px 1px 1px rgba(0,0,0,.65)}#styla-widget.tiles .styla-widget__paragraph{max-height:4.5em;color:#fff!important}#styla-widget.tiles .styla-widget__paragraph-after{color:#fff!important;line-height:1.5em}#styla-widget.tiles .styla-widget__calltoaction,#styla-widget.tiles .styla-widget__paragraph p+p{display:none}",f="styla-widget",c=function(){},h=function(){function t(e,i){if(r(this,t),this.context=e,this.now=Date.now(),this.ignored=0,this.buildStories=this.buildStories.bind(this),this.buildStory=this.buildStory.bind(this),this.buildStoryLink=this.buildStoryLink.bind(this),!e.refs.wrapper){e.stories=i;var n=e.layout.toLowerCase();e.refs.container=this.create("DIV",s["default"].CONTAINER+"  styla-widget-"+this.now);var o=e.refs.wrapper=this.create("DIV",s["default"].WRAPPER+"  "+n);o.id=f;var a=e.api+"/api/config/"+e.slug;this.http.get(a).then(this.buildStories)["catch"](c)}return this}return o(t,[{key:"buildHeadline",value:function(t){var e=this.create,i=e("div",s["default"].HEADLINE_WRAPPER),n=e("span",s["default"].HEADLINE);return n.textContent=t,i.appendChild(n),i}},{key:"buildImage",value:function(t,e){var i=this.create,n=i("div",s["default"].IMAGE_WRAPPER),r=this.context.imageSize,o=t[0].id,a=this.context.images[o],l=this.getImageUrl(a.fileName,r);n.style.cssText="background-image: url("+l+")";var d=i("img",s["default"].IMAGE);return d.src=l,d.alt=a.caption||e,d.title=e,n.appendChild(d),n}},{key:"buildStories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",e=this.domainConfig=JSON.parse(t);if(0===Object.keys(e).length)throw"Styla Widget error: Could not find magazine, please check if slug is configured correctly.";var i={},n=this.context,r=n.stories,o=r.images,a=n.refs;if(n.routesOle=e.routes,n.routesNle=e.embed.routes,n.pushstate=e.embed.pushstateDefault===!1?"#":"/",n.domain=this.setDomain(),a.styles=this.includeBaseStyles(),o){o.forEach(function(t){return i[t.id]=t}),n.images=i,r.stories.forEach(this.buildStory);var s=this.compileStyles();return document.head.appendChild(s),n.target.appendChild(n.refs.wrapper),a.wrapper}return!1}},{key:"buildStory",value:function(t){var e=t.title,i=t.description,n=t.id,r=t.images,o=t.externalPermalink,a=t.boards,l=void 0===a?[]:a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=this.context;if(0!=u.ignore&&d==u.limit-1&&0==this.ignored)return!1;if(""+u.ignore!=""+n&&d<this.ignored+u.limit){var f=this.create,c=f("div",s["default"].STORY),h=f("a",s["default"].STORY_LINK);if(h.href=this.buildStoryLink(o,l),c.appendChild(h),h.appendChild(this.buildImage(r,e)),h.appendChild(this.buildStoryText(e,i)),u.cta){var p=f("div",s["default"].CALL_TO_ACTION);p.innerHTML=u.cta,h.appendChild(p)}var g=u.refs.container,y=u.refs.wrapper;return g.appendChild(c),y.appendChild(g),c}return this.ignored++,!1}},{key:"buildStoryLink",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.context,n=encodeURIComponent(i.layout),r=encodeURIComponent(window.location.href),o=i.urlParams?"?styla_ref="+r+"&styla_wdgt_var="+n:"",a=void 0;if(i.routesNle){var s=e[0]&&e[0].slug||"no-category";a=i.routesNle.magazine?i.routesNle.magazine.path:"",a=(a+i.routesNle.story.path.replace(/:storySlug/,t).replace(/:categorySlug/,s)).substring(1)}return i.routesOle&&(a=i.routesOle.story.replace(/%2\$s_%3\$s/,t)),i.routesOle&&i.routesNle&&console.warn("Both old and new routes defined in config. Ignoring new route."),"//"+i.domain+i.pushstate+a+o}},{key:"buildStoryText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}",i=this.create,n=i("div",s["default"].TEXT_WRAPPER),r=this.buildHeadline(t);n.appendChild(r);var o=i("div",s["default"].PARAGRAPH);e=this.getDescription(JSON.parse(e)),o.innerHTML=e,o.innerHTML=o.textContent.slice(0,220),n.appendChild(o);var a=i("div",s["default"].PARAGRAPH_AFTER);return a.innerHTML="â¦",n.appendChild(a),n}},{key:"buildStyleTag",value:function(t){var e=document.createElement("style");e.type="text/css",e.className=s["default"].STYLES;var i=document.createTextNode(t);return e.appendChild(i),e}},{key:"compileStyles",value:function(){var t=this.domainConfig.theme,e="",i=this.now,n=this.context;t&&(e="#styla-widget .styla-widget-"+i+" ."+s["default"].HEADLINE+"\n                {\n                    font-family:        "+t.hff+";\n                    font-weight:        "+t.hfw+";\n                    font-style:         "+t.hfs+";\n                    text-decoration:    "+t.htd+";\n                    letter-spacing:     "+t.hls+";\n                    color:              "+t.htc+";\n                }\n                #styla-widget .styla-widget-"+i+" ."+s["default"].PARAGRAPH+",\n                #styla-widget .styla-widget-"+i+" ."+s["default"].PARAGRAPH_AFTER+",\n                #styla-widget .styla-widget-"+i+" ."+s["default"].CALLTOACTION+"\n                {\n                    font-family:        "+t.sff+";\n                    font-weight:        "+t.sfw+";\n                    color:              "+t.stc+";\n                }\n                #styla-widget .styla-widget-"+i+" ."+s["default"].CALLTOACTION+"\n                {\n                    color:              "+t.ltc+";\n                }");var r=this.buildStyleTag(e);return r.className=s["default"].THEME_STYLES+"  styla-widget__"+n.layout,n.refs.themeStyle=r,r}}]),o(t,[{key:"create",value:function(t,e){var i=document.createElement(t.toUpperCase());return e&&(i.className=e),i}},{key:"getDescription",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t[i];if(!n)return"";var r=this.create("div");r.innerHTML=n.content;var o=r.textContent,a="text"==n.type&&""!==o;return a?e?o+" "+this.getDescription(t,e,i+1):o:this.getDescription(t,e,i+1)}},{key:"getImageUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,i=this.context.imageApiDomain;return"//"+i+"/resizer/sfh_"+e+"x0/_"+t+"?still"}},{key:"includeBaseStyles",value:function(t){function e(t,e,o){var l=a.querySelector("."+e);return l||(i=n.buildStyleTag(t),i.className=e+"  "+s["default"].STYLES,r.refs[o+"Style"]=i,a.appendChild(i)),i}var i=void 0,n=this,r=this.context,o=r.layout.toUpperCase(),a=document.head,l=new Array(2);return l[0]=e(t||d,""+s["default"].BASE_STYLES,"base"),l[1]=e(u,s["default"][o+"_STYLES"],r.layout),this.domainConfig.embed.customFontUrl&&l.push(this.includeFonts()),l=l.filter(function(t){return t})}},{key:"includeFonts",value:function(){var t=this.context.ignoreFonts;if(!t){var e=document.createElement("link");e.className=s["default"].FONT_LINK,e.type="text/css",e.rel="stylesheet";var i=this.domainConfig.embed.customFontUrl;return e.href=-1!==i.indexOf("//")?i:"//"+i,document.head.appendChild(e),e}}},{key:"setDomain",value:function(){var t=this.domainConfig.embed,e=this.context,i=void 0;if(!e.domain){if(e.linkDomain)i=e.linkDomain;else{if(!t)throw"Styla Widget error: No domain defined or bad domain config.";var n=t.rootPath;"/"!==n[0]&&(n="/"+n),n.length>1&&"/"==n[n.length-1]&&(n=n.substring(0,n.length-1)),"/"===n&&(n=""),i=""+t.magazineUrl+n}return i=i.replace(/^(http(s)?:)?\/\//,""),e.domain=i}return e.domain}}]),t}();h.prototype.http=l.http,i["default"]=h},{"/home/dukat/styla/code/widget/src/classes":4,"microbejs/dist/microbe.http.min":1}],4:[function(t,e,i){"use strict";e.exports={BASE_STYLES:"styla-widget__base-styling",CALL_TO_ACTION:"styla-widget__calltoaction",CONTAINER:"styla-widget__container",FONT_LINK:"styla-widget__font-link",HEADLINE:"styla-widget__headline",HEADLINE_WRAPPER:"styla-widget__headlinewrap",HORIZONTAL_STYLES:"styla-widget__horizontal-styling",IMAGE:"styla-widget__image",IMAGE_WRAPPER:"styla-widget__imagewrap",LIST_STYLES:"styla-widget__list-styling",PARAGRAPH:"styla-widget__paragraph",PARAGRAPH_AFTER:"styla-widget__paragraph-after",STORIES_STYLES:"styla-widget__stories-styling",STORY:"styla-widget__story",STORY_LINK:"styla-widget__link",STYLES:"styla-widget__styling",TEXT_WRAPPER:"styla-widget__textwrap",THEME_STYLES:"styla-widget__theme-styling",TILES_STYLES:"styla-widget__tiles-styling",TITLE:"styla-widget__title",WRAPPER:"styla-widget__wrapper"}},{}],5:[function(t,e,i){"use strict";e.exports="2.5.0"},{}]},{},[2]);