/*! Styla Widget v2.5.2 | (c) 2016-2021 Styla GmbH | https://github.com/styladev/widget/blob/master/license.md */
!function(){function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n||t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return t}()({1:[function(t,e,n){(function(i,r){(function(){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof i?r=i:"undefined"!=typeof self&&(r=self),r.Âµ=t()}}(function(){return function e(n,i,r){function o(a,l){if(!i[a]){if(!n[a]){var u="function"==typeof t&&t;if(!l&&u)return u(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return o(e?e:t)},c,c.exports,e,n,i,r)}return i[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";var i="[object Microbe-Http]",r={},o=t("./version")+"-http";t("./modules/http")(r),Object.defineProperty(r,"version",{get:function(){return o}}),Object.defineProperty(r,"type",{get:function(){return i}}),e.exports=r},{"./modules/http":9,"./version":10}],2:[function(t,e,n){(function(t){function n(){for(;o.next;){o=o.next;var t=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{t()}catch(i){if(u)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),i;setTimeout(function(){throw i},0)}e&&e.exit()}a=!1}function i(e){s=s.next={task:e,domain:u&&t.domain,next:null},a||(a=!0,l())}var o={task:void 0,next:null},s=o,a=!1,l=void 0,u=!1;if("undefined"!=typeof t&&t.nextTick)u=!0,l=function(){t.nextTick(n)};else if("function"==typeof r)l="undefined"!=typeof window?r.bind(window,n):function(){r(n)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=n,l=function(){d.port2.postMessage(0)}}else l=function(){setTimeout(n,0)};e.exports=i}).call(this,t("_process"))},{_process:3}],3:[function(t,e,n){function i(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,n){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(t,e,n){"use strict";function i(t){function e(t){return null===l?void d.push(t):void s(function(){var e=l?t.onFulfilled:t.onRejected;if(null===e)return void(l?t.resolve:t.reject)(u);var n;try{n=e(u)}catch(i){return void t.reject(i)}t.resolve(n)})}function n(t){try{if(t===c)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void o(e.bind(t),n,i)}l=!0,u=t,a()}catch(r){i(r)}}function i(t){l=!1,u=t,a()}function a(){for(var t=0,n=d.length;n>t;t++)e(d[t]);d=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var l=null,u=null,d=[],c=this;this.then=function(t,n){return new c.constructor(function(i,o){e(new r(t,n,i,o))})},o(t,n,i)}function r(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function o(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(r){if(i)return;i=!0,n(r)}}var s=t("asap");e.exports=i},{asap:2}],6:[function(t,e,n){"use strict";var i=t("./core.js"),r=t("asap");e.exports=i,i.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){r(function(){throw t})})}},{"./core.js":5,asap:2}],7:[function(t,e,n){"use strict";function i(t){this.then=function(e){return"function"!=typeof e?this:new r(function(n,i){o(function(){try{n(e(t))}catch(r){i(r)}})})}}var r=t("./core.js"),o=t("asap");e.exports=r,i.prototype=r.prototype;var s=new i(!0),a=new i(!1),l=new i(null),u=new i(void 0),d=new i(0),c=new i("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return l;if(void 0===t)return u;if(t===!0)return s;if(t===!1)return a;if(0===t)return d;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(n){return new r(function(t,e){e(n)})}return new i(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,n){function i(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){i(o,t)},n)}e[o]=s,0===--r&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)i(o,e[o])})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.forEach(function(t){r.resolve(t).then(e,n)})})},r.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":5,asap:2}],8:[function(t,e,n){"use strict";var i=t("./core.js"),r=t("asap");e.exports=i,i.denodeify=function(t,e){return e=e||1/0,function(){var n=this,r=Array.prototype.slice.call(arguments);return new i(function(i,o){for(;r.length&&r.length>e;)r.pop();r.push(function(t,e){t?o(t):i(e)});var s=t.apply(n,r);!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then||i(s)})}},i.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,o=this;try{return t.apply(this,arguments).nodeify(n,o)}catch(s){if(null===n||"undefined"==typeof n)return new i(function(t,e){e(s)});r(function(){n.call(o,s)})}}},i.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){r(function(){t.call(e,null,n)})},function(n){r(function(){t.call(e,n)})})}},{"./core.js":5,asap:2}],9:[function(t,e,n){e.exports=function(e){"use strict";var n=t("promise");e.http=function(t){var e,i,r,o,s,a,l,u;if(!t)return new Error("No parameters given");if("string"==typeof t&&(t={url:t}),e=new XMLHttpRequest,i=t.method||"GET",r=t.url,o=JSON.stringify(t.data)||null,s=t.user||"",a=t.password||"",l=t.headers||null,u="boolean"==typeof t.async?t.async:!0,e.onreadystatechange=function(){return 4===e.readyState?e:void 0},e.open(i,r,u,s,a),"POST"===i&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l)for(var d in l)e.setRequestHeader(d,l[d]);if(u)return new n(function(t,n){e.onerror=function(){n(new Error("Network error!"))},e.send(o),e.onload=function(){200===e.status?t(e.response):n(new Error(e.status))}});var c=function(t){var e={then:function(n){return 200===t.status&&n(t.responseText),e},"catch":function(n){return 200!==t.status&&n({status:t.status,statusText:t.statusText}),e}};return e};return e.send(o),e.onloadend=function(){return e.onreadystatechange(),c(e)},e.onloadend()},e.http.get=function(t){return this({url:t,method:"GET"})},e.http.post=function(t,e){return this({url:t,data:e,method:"POST"})}}},{promise:4}],10:[function(t,e,n){e.exports="0.5.2"},{}]},{},[1])(1)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{timers:3}],2:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){y&&p&&(y=!1,p.length?g=p.concat(g):m=-1,g.length&&l())}function l(){if(!y){var t=o(a);y=!0;for(var e=g.length;e;){for(p=g,g=[];++m<e;)p&&p[m].run();m=-1,e=g.length}p=null,y=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function d(){}var c,f,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(t){c=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,g=[],y=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new u(t,e)),1!==g.length||y||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=d,h.addListener=d,h.once=d,h.off=d,h.removeListener=d,h.removeAllListeners=d,h.emit=d,h.prependListener=d,h.prependOnceListener=d,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],3:[function(t,e,n){(function(e,i){(function(){function r(t,e){this._id=t,this._clearFn=e}var o=t("process/browser.js").nextTick,s=Function.prototype.apply,a=Array.prototype.slice,l={},u=0;n.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=u++,i=arguments.length<2?!1:a.call(arguments,1);return l[e]=!0,o(function(){l[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof i?i:function(t){delete l[t]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("/Users/antonio/repos/widget/src/version"),a=i(s),l=t("/Users/antonio/repos/widget/src/classes"),u=i(l),d=t("/Users/antonio/repos/widget/src/build.tmpl"),c=i(d),f=t("microbejs/dist/microbe.http.min"),h="stories";h=h[0].toUpperCase()+h.slice(1);var p=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.slug,o=n.api,s=void 0===o?"https://live.styla.com":o,l=n.domain,u=void 0===l?!1:l,d=n.iframe,f=void 0===d?!1:d,p=n.ignore,g=void 0===p?!1:p,y=n.limit,m=void 0===y?5:y,w=n.linkDomain,v=void 0===w?!1:w,_=n.minWidth,b=void 0===_?250:_,T=n.newTab,x=void 0===T?!1:T,E=n.offset,S=void 0===E?0:E,k=n.imageSize,A=void 0===k?400:k,L=n.storiesApi,C=void 0===L?!1:L,j=n.ignoreFonts,I=void 0===j?!1:j,O=n.tag,N=void 0===O?!1:O,P=n.category,R=void 0===P?!1:P,D=n.cta,H=void 0===D?!1:D,M=n.target,U=void 0===M?document.body:M,W=n.urlParams,z=void 0===W?!0:W,F=n.imageApiDomain,Y=void 0===F?"img.styla.com":F;if(r(this,t),U=this.checkTarget(U,b),!i)throw"Styla Widget error: No slug defined, cannot render widget";this.layout=h,this.refs={},this.api=s,this.domain=u,this.linkDomain=v,this.ignore=g,this.iframe=f,this.newTab=x,this.limit=m=g?m+1:m,this.minWidth=b,this.offset=S,this.imageSize=A,this.slug=i,this.storiesApi=C,this.ignoreFonts=I,this.tag=N,this.category=R,this.cta=H,this.target=U,this.urlParams=z,this.imageApiDomain=Y;var G=m+S;N!==!1&&R!==!1&&console.error("Styla Widget error: Both tag and category filter has been added to the configuration, but only one can be used, stories will be filtered only by tag.");var q=void 0;q=0!=N?s+"/api/feeds/tags/"+N+"?limit="+G+"&domain="+i:0!=R?s+"/api/feeds/boards/"+R+"/user/"+i+"?domain="+i:s+"/api/feeds/all?domain="+i+"&limit="+G,this.url=q,this.http.get(C||q).then(function(t){function n(t,e){var i=t.length;return e>=i?t:(t.splice(i-1,1),n(t,e))}t=JSON.parse(t),t.stories=t.stories.slice(S),t.stories=n(t.stories,m),new c["default"](e,t)}),Object.defineProperty(this,"version",{value:a["default"]})}return o(t,[{key:"attach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target;t=this.checkTarget(t,this.minWidth);var e=this.refs,n=e.styles,i=document.head,r=i.querySelector("."+u["default"].BASE_STYLES);return r&&i.removeChild(r),t.appendChild(e.wrapper),n.forEach(function(t){i.appendChild(t)}),this}},{key:"checkTarget",value:function(t,e){if("string"==typeof t&&(t=document.querySelector(t)))return t;if("undefined"==typeof t||null===t)return console.error("Styla Widget error: Cant find target element in DOM. Widget will render directly in body"),document.body;if(t.offsetWidth<e)throw"Styla Widget error: Target element too small to render widget Â¯\\_(ã)_/Â¯";return t}}]),o(t,[{key:"destroy",value:function(){var t=this.refs,e=t.styles,n=t.wrapper,i=document.head;return n.parentNode.removeChild(n),e.forEach(function(t){i.removeChild(t)}),this}}]),t}();p.prototype.http=f.http,window["StylaWidget_"+h]=p,Object.defineProperty(p,"version",{value:a["default"]}),n["default"]=p},{"/Users/antonio/repos/widget/src/build.tmpl":5,"/Users/antonio/repos/widget/src/classes":6,"/Users/antonio/repos/widget/src/version":7,"microbejs/dist/microbe.http.min":1}],5:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("/Users/antonio/repos/widget/src/classes"),a=i(s),l=t("microbejs/dist/microbe.http.min"),u="#styla-widget p{margin:0}#styla-widget.styla-widget__wrapper{width:100%;height:100%}#styla-widget .styla-widget__container{box-sizing:border-box;position:relative;overflow:hidden;height:100%;width:100%;min-height:14em;font-size:14px}#styla-widget .styla-widget__story{margin-bottom:1em;position:relative}#styla-widget .styla-widget__link{position:absolute;width:100%;display:-moz-flex;display:-webkit-flex;display:flex;text-decoration:none;color:inherit}#styla-widget__link>div{display:inline-block}#styla-widget .styla-widget__imagewrap{background-repeat:no-repeat;background-position:50%;background-size:contain}#styla-widget .styla-widget__image{max-height:100%;max-width:100%;height:100%;object-fit:contain;opacity:0}#styla-widget .styla-widget__textwrap{display:block;-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;max-height:100%;overflow:hidden;float:left}#styla-widget .styla-widget__headlinewrap{display:flex;flex-direction:column;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}#styla-widget .styla-widget__headline,#styla-widget .styla-widget__title{line-height:1.25em;max-height:2.5em;overflow:hidden;margin-top:1em;margin-bottom:1em}#styla-widget .styla-widget__title{font-size:2em;text-align:center;margin-bottom:30px}#styla-widget .styla-widget__paragraph{font-size:1em;line-height:1.5em;overflow:hidden;position:relative;word-wrap:break-word}",d="#styla-widget .styla-widget__container,#styla-widget.styla-widget__wrapper{height:auto}#styla-widget.stories .styla-widget__story{overflow:hidden;height:5em}#styla-widget.stories .styla-widget__link{height:5em}#styla-widget.stories__link>div{display:inline-block}#styla-widget.stories .styla-widget__image,#styla-widget.stories .styla-widget__imagewrap{width:85px;object-fit:cover}#styla-widget.stories .styla-widget__imagewrap{margin:0 3% 0 0;height:100%}#styla-widget.stories .styla-widget__textwrap{width:calc(100% - 85px);display:block;flex-grow:1;max-height:100%;overflow:hidden;float:left}#styla-widget.stories .styla-widget__headlinewrap{min-height:2em;max-height:4em;display:flex;flex-direction:column;justify-content:flex-end}#styla-widget.stories .styla-widget__headline{font-size:1.4em;line-height:1.25em;max-height:2.5em;overflow:hidden;margin:0 0 .25em;word-wrap:break-word;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}#styla-widget.stories .styla-widget__paragraph{font-size:1em;line-height:1.5em;height:3em;overflow:hidden;position:relative;word-wrap:break-word;text-overflow:ellipsis;display:inline}#styla-widget.stories .styla-widget__paragraph-after{display:inline}#styla-widget.stories .styla-widget__calltoaction{display:none}",c="styla-widget",f=function(){},h=function(){function t(e,n){if(r(this,t),this.context=e,this.now=Date.now(),this.ignored=0,this.buildStories=this.buildStories.bind(this),this.buildStory=this.buildStory.bind(this),this.buildStoryLink=this.buildStoryLink.bind(this),!e.refs.wrapper){e.stories=n;var i=e.layout.toLowerCase();e.refs.container=this.create("DIV",a["default"].CONTAINER+"  styla-widget-"+this.now);var o=e.refs.wrapper=this.create("DIV",a["default"].WRAPPER+"  "+i);o.id=c;var s=e.api+"/api/config/"+e.slug;this.http.get(s).then(this.buildStories)["catch"](f)}return this}return o(t,[{key:"buildHeadline",value:function(t){var e=this.create,n=e("div",a["default"].HEADLINE_WRAPPER),i=e("span",a["default"].HEADLINE);return i.textContent=t,n.appendChild(i),n}},{key:"buildImage",value:function(t,e){var n=this.create,i=n("div",a["default"].IMAGE_WRAPPER),r=this.context.imageSize,o=t[0].id,s=this.context.images[o],l=this.getImageUrl(s.fileName,r);i.style.cssText="background-image: url("+l+")";var u=n("img",a["default"].IMAGE);return u.src=l,u.alt=s.caption||e,u.title=e,i.appendChild(u),i}},{key:"buildStories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",e=this.domainConfig=JSON.parse(t);if(0===Object.keys(e).length)throw"Styla Widget error: Could not find magazine, please check if slug is configured correctly.";var n={},i=this.context,r=i.stories,o=r.images,s=i.refs;if(i.routesOle=e.routes,i.routesNle=e.embed.routes,i.pushstate=e.embed.pushstateDefault===!1?"#":"/",i.domain=this.setDomain(),s.styles=this.includeBaseStyles(),o){o.forEach(function(t){return n[t.id]=t}),i.images=n,r.stories.forEach(this.buildStory);var a=this.compileStyles();return document.head.appendChild(a),i.target.appendChild(i.refs.wrapper),s.wrapper}return!1}},{key:"buildStory",value:function(t){var e=t.title,n=t.description,i=t.id,r=t.images,o=t.externalPermalink,s=t.boards,l=void 0===s?[]:s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=this.context;if(0!=d.ignore&&u==d.limit-1&&0==this.ignored)return!1;if(""+d.ignore!=""+i&&u<this.ignored+d.limit){var c=this.create,f=c("div",a["default"].STORY),h=c("a",a["default"].STORY_LINK);if(h.href=this.buildStoryLink(o,l),f.appendChild(h),h.appendChild(this.buildImage(r,e)),h.appendChild(this.buildStoryText(e,n)),d.cta){var p=c("div",a["default"].CALL_TO_ACTION);p.innerHTML=d.cta,h.appendChild(p)}var g=d.refs.container,y=d.refs.wrapper;return g.appendChild(f),y.appendChild(g),f}return this.ignored++,!1}},{key:"buildStoryLink",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.context,i=void 0;if(n.routesNle){var r=e[0]&&e[0].slug||"no-category";i=n.routesNle.magazine?n.routesNle.magazine.path:"",i=(i+n.routesNle.story.path.replace(/:storySlug/,t).replace(/:categorySlug/,r)).substring(1)}return n.routesOle&&(i=n.routesOle.story.replace(/%2\$s_%3\$s/,t)),n.routesOle&&n.routesNle&&console.warn("Both old and new routes defined in config. Ignoring new route."),"//"+n.domain+n.pushstate+i}},{key:"buildStoryText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}",n=this.create,i=n("div",a["default"].TEXT_WRAPPER),r=this.buildHeadline(t);i.appendChild(r);var o=n("div",a["default"].PARAGRAPH);e=this.getDescription(JSON.parse(e)),o.innerHTML=e,o.innerHTML=o.textContent.slice(0,220),i.appendChild(o);var s=n("div",a["default"].PARAGRAPH_AFTER);return s.innerHTML="â¦",i.appendChild(s),i}},{key:"buildStyleTag",value:function(t){var e=document.createElement("style");e.type="text/css",e.className=a["default"].STYLES;var n=document.createTextNode(t);return e.appendChild(n),e}},{key:"compileStyles",value:function(){var t=this.domainConfig.theme,e="",n=this.now,i=this.context;t&&(e="#styla-widget .styla-widget-"+n+" ."+a["default"].HEADLINE+"\n                {\n                    font-family:        "+t.hff+";\n                    font-weight:        "+t.hfw+";\n                    font-style:         "+t.hfs+";\n                    text-decoration:    "+t.htd+";\n                    letter-spacing:     "+t.hls+";\n                    color:              "+t.htc+";\n                    text-transform:     "+t.htt+";\n                }\n                #styla-widget .styla-widget-"+n+" ."+a["default"].PARAGRAPH+",\n                #styla-widget .styla-widget-"+n+" ."+a["default"].PARAGRAPH_AFTER+",\n                #styla-widget .styla-widget-"+n+" ."+a["default"].CALLTOACTION+"\n                {\n                    font-family:        "+t.sff+";\n                    font-weight:        "+t.sfw+";\n                    color:              "+t.stc+";\n                }\n                #styla-widget .styla-widget-"+n+" ."+a["default"].CALLTOACTION+"\n                {\n                    color:              "+t.ltc+";\n                }");var r=this.buildStyleTag(e);return r.className=a["default"].THEME_STYLES+"  styla-widget__"+i.layout,i.refs.themeStyle=r,r}}]),o(t,[{key:"create",value:function(t,e){var n=document.createElement(t.toUpperCase());return e&&(n.className=e),n}},{key:"getDescription",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t[n];if(!i)return"";var r=this.create("div");r.innerHTML=i.content;var o=r.textContent,s="text"==i.type&&""!==o;return s?e?o+" "+this.getDescription(t,e,n+1):o:this.getDescription(t,e,n+1)}},{key:"getImageUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=this.context.imageApiDomain;return"//"+n+"/resizer/sfh_"+e+"x0/_"+t+"?still"}},{key:"includeBaseStyles",value:function(t){function e(t,e,o){var l=s.querySelector("."+e);return l||(n=i.buildStyleTag(t),n.className=e+"  "+a["default"].STYLES,r.refs[o+"Style"]=n,s.appendChild(n)),n}var n=void 0,i=this,r=this.context,o=r.layout.toUpperCase(),s=document.head,l=new Array(2);return l[0]=e(t||u,""+a["default"].BASE_STYLES,"base"),l[1]=e(d,a["default"][o+"_STYLES"],r.layout),this.domainConfig.embed.customFontUrl&&l.push(this.includeFonts()),l=l.filter(function(t){return t})}},{key:"includeFonts",value:function(){var t=this.context.ignoreFonts;if(!t){var e=document.createElement("link");e.className=a["default"].FONT_LINK,e.type="text/css",e.rel="stylesheet";var n=this.domainConfig.embed.customFontUrl;return e.href=-1!==n.indexOf("//")?n:"//"+n,document.head.appendChild(e),e}}},{key:"setDomain",value:function(){var t=this.domainConfig.embed,e=this.context,n=void 0;if(!e.domain){if(e.linkDomain)n=e.linkDomain;else{if(!t)throw"Styla Widget error: No domain defined or bad domain config.";var i=t.rootPath;"/"!==i[0]&&(i="/"+i),i.length>1&&"/"==i[i.length-1]&&(i=i.substring(0,i.length-1)),"/"===i&&(i=""),n=""+t.magazineUrl+i}return n=n.replace(/^(http(s)?:)?\/\//,""),e.domain=n}return e.domain}}]),t}();h.prototype.http=l.http,n["default"]=h},{"/Users/antonio/repos/widget/src/classes":6,"microbejs/dist/microbe.http.min":1}],6:[function(t,e,n){"use strict";e.exports={BASE_STYLES:"styla-widget__base-styling",CALL_TO_ACTION:"styla-widget__calltoaction",CONTAINER:"styla-widget__container",FONT_LINK:"styla-widget__font-link",HEADLINE:"styla-widget__headline",HEADLINE_WRAPPER:"styla-widget__headlinewrap",HORIZONTAL_STYLES:"styla-widget__horizontal-styling",IMAGE:"styla-widget__image",IMAGE_WRAPPER:"styla-widget__imagewrap",LIST_STYLES:"styla-widget__list-styling",PARAGRAPH:"styla-widget__paragraph",PARAGRAPH_AFTER:"styla-widget__paragraph-after",STORIES_STYLES:"styla-widget__stories-styling",STORY:"styla-widget__story",STORY_LINK:"styla-widget__link",STYLES:"styla-widget__styling",TEXT_WRAPPER:"styla-widget__textwrap",THEME_STYLES:"styla-widget__theme-styling",TILES_STYLES:"styla-widget__tiles-styling",TITLE:"styla-widget__title",WRAPPER:"styla-widget__wrapper"}},{}],7:[function(t,e,n){"use strict";e.exports="2.5.2"},{}]},{},[4]);