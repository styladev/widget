/*! Styla Widget v0.0.2 | (c) 2016 Styla GmbH | https://github.com/styladev/widget/license.md */
<<<<<<< Updated upstream
!function t(e,n,o){function i(u,s){if(!n[u]){if(!e[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(r)return r(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return i(n?n:t)},c,c.exports,t,e,n,o)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){(function(o){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof o?i=o:"undefined"!=typeof self&&(i=self),i.µ=t()}}(function(){return function e(n,o,i){function r(s,f){if(!o[s]){if(!n[s]){var a="function"==typeof t&&t;if(!f&&a)return a(s,!0);if(u)return u(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[s]={exports:{}};n[s][0].call(d.exports,function(t){var e=n[s][1][t];return r(e?e:t)},d,d.exports,e,n,o,i)}return o[s].exports}for(var u="function"==typeof t&&t,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var o="[object Microbe-Http]",i={},r=t("./version")+"-http";t("./modules/http")(i),Object.defineProperty(i,"version",{get:function(){return r}}),Object.defineProperty(i,"type",{get:function(){return o}}),e.exports=i},{"./modules/http":9,"./version":10}],2:[function(t,e,n){(function(t){function n(){for(;i.next;){i=i.next;var t=i.task;i.task=void 0;var e=i.domain;e&&(i.domain=void 0,e.enter());try{t()}catch(o){if(f)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),o;setTimeout(function(){throw o},0)}e&&e.exit()}u=!1}function o(e){r=r.next={task:e,domain:f&&t.domain,next:null},u||(u=!0,s())}var i={task:void 0,next:null},r=i,u=!1,s=void 0,f=!1;if("undefined"!=typeof t&&t.nextTick)f=!0,s=function(){t.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=n,s=function(){a.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};e.exports=o}).call(this,t("_process"))},{_process:3}],3:[function(t,e,n){function o(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,n){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(t,e,n){"use strict";function o(t){function e(t){return null===f?void c.push(t):void u(function(){var e=f?t.onFulfilled:t.onRejected;if(null===e)return void(f?t.resolve:t.reject)(a);var n;try{n=e(a)}catch(o){return void t.reject(o)}t.resolve(n)})}function n(t){try{if(t===d)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void r(e.bind(t),n,o)}f=!0,a=t,s()}catch(i){o(i)}}function o(t){f=!1,a=t,s()}function s(){for(var t=0,n=c.length;n>t;t++)e(c[t]);c=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var f=null,a=null,c=[],d=this;this.then=function(t,n){return new d.constructor(function(o,r){e(new i(t,n,o,r))})},r(t,n,o)}function i(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function r(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(i){if(o)return;o=!0,n(i)}}var u=t("asap");e.exports=o},{asap:2}],6:[function(t,e,n){"use strict";var o=t("./core.js"),i=t("asap");e.exports=o,o.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){i(function(){throw t})})}},{"./core.js":5,asap:2}],7:[function(t,e,n){"use strict";function o(t){this.then=function(e){return"function"!=typeof e?this:new i(function(n,o){r(function(){try{n(e(t))}catch(i){o(i)}})})}}var i=t("./core.js"),r=t("asap");e.exports=i,o.prototype=i.prototype;var u=new o(!0),s=new o(!1),f=new o(null),a=new o(void 0),c=new o(0),d=new o("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return f;if(void 0===t)return a;if(t===!0)return u;if(t===!1)return s;if(0===t)return c;if(""===t)return d;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(n){return new i(function(t,e){e(n)})}return new o(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function o(r,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(t){o(r,t)},n)}e[r]=u,0===--i&&t(e)}catch(f){n(f)}}if(0===e.length)return t([]);for(var i=e.length,r=0;r<e.length;r++)o(r,e[r])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":5,asap:2}],8:[function(t,e,n){"use strict";var o=t("./core.js"),i=t("asap");e.exports=o,o.denodeify=function(t,e){return e=e||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments);return new o(function(o,r){for(;i.length&&i.length>e;)i.pop();i.push(function(t,e){t?r(t):o(e)});var u=t.apply(n,i);!u||"object"!=typeof u&&"function"!=typeof u||"function"!=typeof u.then||o(u)})}},o.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,r=this;try{return t.apply(this,arguments).nodeify(n,r)}catch(u){if(null===n||"undefined"==typeof n)return new o(function(t,e){e(u)});i(function(){n.call(r,u)})}}},o.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){i(function(){t.call(e,null,n)})},function(n){i(function(){t.call(e,n)})})}},{"./core.js":5,asap:2}],9:[function(t,e,n){e.exports=function(e){"use strict";var n=t("promise");e.http=function(t){var e,o,i,r,u,s,f,a;if(!t)return new Error("No parameters given");if("string"==typeof t&&(t={url:t}),e=new XMLHttpRequest,o=t.method||"GET",i=t.url,r=JSON.stringify(t.data)||null,u=t.user||"",s=t.password||"",f=t.headers||null,a="boolean"==typeof t.async?t.async:!0,e.onreadystatechange=function(){return 4===e.readyState?e:void 0},e.open(o,i,a,u,s),"POST"===o&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f)for(var c in f)e.setRequestHeader(c,f[c]);if(a)return new n(function(t,n){e.onerror=function(){n(new Error("Network error!"))},e.send(r),e.onload=function(){200===e.status?t(e.response):n(new Error(e.status))}});var d=function(t){var e={then:function(n){return 200===t.status&&n(t.responseText),e},"catch":function(n){return 200!==t.status&&n({status:t.status,statusText:t.statusText}),e}};return e};return e.send(r),e.onloadend=function(){return e.onreadystatechange(),d(e)},e.onloadend()},e.http.get=function(t){return this({url:t,method:"GET"})},e.http.post=function(t,e){return this({url:t,data:e,method:"POST"})}}},{promise:4}],10:[function(t,e,n){e.exports="0.5.2"},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";e.exports={CONTAINER:"styla-widget",TEXT_WRAPPER:"styla-widget__textwrap",HEADLINE:"styla-widget__headline",HEADLINE_WRAPPER:"styla-widget__headlinewrap",IMAGE:"styla-widget__image",IMAGE_WRAPPER:"styla-widget__imagewrap",STORY:"styla-widget__story",PARAGRAPH:"styla-widget__paragraph",STORY_LINK:"styla-widget__link"}},{}],3:[function(t,e,n){"use strict";e.exports="0.0.2"},{}],4:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=t("./version.js"),s=o(u),f=t("./classes.js"),a=o(f),c=t("microbejs/dist/microbe.http.min"),d="https://www.amazine.com/api/config/",l=function(){function t(e){var n=this,o=e.slug,r=void 0===o?"":o,u=e.tag,f=void 0===u?!1:u,l=e.limit,p=void 0===l?5:l,h=e.offset,y=void 0===h?0:h;i(this,t),this.buildStories=function(t){t=JSON.parse(t);var e=n.container=n.create("DIV",a["default"].CONTAINER),o=function(o){n.domainConfig=o=JSON.parse(o);var i=o.embed;n.domain=i.magazineUrl+"/"+i.rootPath;var r=n.buildStyles(o);if(o.embed.customFontUrl){var u=n.includeFonts(o);document.head.appendChild(u)}var s={},f=t.images;if(f){f.forEach(function(t){s[t.id]=t}),n.images=s;t.stories.map(n.buildStory);document.head.appendChild(r),document.body.appendChild(e)}};return c.http.get(n.domainConfigAPI+n.slug).then(o)["catch"](function(t){console.log(t)}),e},this.buildStory=function(t){var e=t.title,o=t.description,i=t.images,r=t.externalPermalink,u=n.create,s=u("div",a["default"].STORY),f=u("a",a["default"].STORY_LINK),c=u("div",a["default"].IMAGE_WRAPPER),d=u("img",a["default"].IMAGE),l=u("div",a["default"].TEXT_WRAPPER),p=u("div",a["default"].HEADLINE_WRAPPER),h=u("h1",a["default"].HEADLINE),y=u("div",a["default"].PARAGRAPH),w=i[0].id,v=n.images[w];return f.href=n.domain+"story/"+r+"/",d.src=n.getImageUrl(v.fileName,400),d.alt=v.caption||e,d.title=e,h.textContent=e,s.appendChild(f),c.appendChild(d),f.appendChild(c),f.appendChild(l),p.appendChild(h),l.appendChild(p),y.innerHTML=n.getDescription(JSON.parse(o)),y.innerHTML=y.textContent,l.appendChild(y),n.container.appendChild(s),s},this.slug=r,this.tag=f,this.domainConfigAPI=d,this.version=s["default"];var w=f?"https://www.amazine.com/api/feeds/userTag/"+r+"/tag/"+f+"?offset="+y+"&limit="+p+"&domain="+r:"https://www.amazine.com/api/feeds/user/"+r+"?domain="+r+"&offset="+y+"&limit="+p;return c.http.get(w).then(this.buildStories),this}return r(t,[{key:"create",value:function(t,e){var n=document.createElement(t.toUpperCase());return n.className=e,n}},{key:"getDescription",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=t[e];return n?"text"!==n.type?this.getDescription(t,e+1):n.content:!1}},{key:"getImageUrl",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?400:arguments[1];return"//img.styla.com/resizer/sfh_"+e+"x0/_"+t}},{key:"buildStyles",value:function(t){var e=t.theme,n="."+a["default"].HEADLINE+"\n            {\n                font-family:        "+e.hff+";\n                font-weight:        "+e.hfw+";\n                font-style:         "+e.hfs+";\n                text-decoration:    "+e.htd+";\n                letter-spacing:     "+e.hls+";\n                color:              "+e.htc+"\n            }\n            ."+a["default"].PARAGRAPH+"\n            {\n                font-family:        "+e.sff+";\n                font-weight:        "+e.sfw+";\n                color:              "+e.stc+"\n            }\n            ",o=document.createElement("style");o.type="text/css",o.id=a["default"].CONTAINER+"__styling";var i=document.createTextNode(n);return o.appendChild(i),o}},{key:"includeFonts",value:function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t.embed.customFontUrl,e}}]),t}();window.config||(window.config={});new l(window.config);n["default"]=l,e.exports=n["default"]},{"./classes.js":2,"./version.js":3,"microbejs/dist/microbe.http.min":1}]},{},[4]);
=======
!function t(e,n,o){function i(u,s){if(!n[u]){if(!e[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(r)return r(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return i(n?n:t)},c,c.exports,t,e,n,o)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){(function(o){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof o?i=o:"undefined"!=typeof self&&(i=self),i.µ=t()}}(function(){return function e(n,o,i){function r(s,f){if(!o[s]){if(!n[s]){var a="function"==typeof t&&t;if(!f&&a)return a(s,!0);if(u)return u(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=o[s]={exports:{}};n[s][0].call(l.exports,function(t){var e=n[s][1][t];return r(e?e:t)},l,l.exports,e,n,o,i)}return o[s].exports}for(var u="function"==typeof t&&t,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var o="[object Microbe-Http]",i={},r=t("./version")+"-http";t("./modules/http")(i),Object.defineProperty(i,"version",{get:function(){return r}}),Object.defineProperty(i,"type",{get:function(){return o}}),e.exports=i},{"./modules/http":9,"./version":10}],2:[function(t,e,n){(function(t){function n(){for(;i.next;){i=i.next;var t=i.task;i.task=void 0;var e=i.domain;e&&(i.domain=void 0,e.enter());try{t()}catch(o){if(f)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),o;setTimeout(function(){throw o},0)}e&&e.exit()}u=!1}function o(e){r=r.next={task:e,domain:f&&t.domain,next:null},u||(u=!0,s())}var i={task:void 0,next:null},r=i,u=!1,s=void 0,f=!1;if("undefined"!=typeof t&&t.nextTick)f=!0,s=function(){t.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=n,s=function(){a.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};e.exports=o}).call(this,t("_process"))},{_process:3}],3:[function(t,e,n){function o(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,n){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(t,e,n){"use strict";function o(t){function e(t){return null===f?void c.push(t):void u(function(){var e=f?t.onFulfilled:t.onRejected;if(null===e)return void(f?t.resolve:t.reject)(a);var n;try{n=e(a)}catch(o){return void t.reject(o)}t.resolve(n)})}function n(t){try{if(t===l)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void r(e.bind(t),n,o)}f=!0,a=t,s()}catch(i){o(i)}}function o(t){f=!1,a=t,s()}function s(){for(var t=0,n=c.length;n>t;t++)e(c[t]);c=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var f=null,a=null,c=[],l=this;this.then=function(t,n){return new l.constructor(function(o,r){e(new i(t,n,o,r))})},r(t,n,o)}function i(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function r(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(i){if(o)return;o=!0,n(i)}}var u=t("asap");e.exports=o},{asap:2}],6:[function(t,e,n){"use strict";var o=t("./core.js"),i=t("asap");e.exports=o,o.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){i(function(){throw t})})}},{"./core.js":5,asap:2}],7:[function(t,e,n){"use strict";function o(t){this.then=function(e){return"function"!=typeof e?this:new i(function(n,o){r(function(){try{n(e(t))}catch(i){o(i)}})})}}var i=t("./core.js"),r=t("asap");e.exports=i,o.prototype=i.prototype;var u=new o(!0),s=new o(!1),f=new o(null),a=new o(void 0),c=new o(0),l=new o("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return f;if(void 0===t)return a;if(t===!0)return u;if(t===!1)return s;if(0===t)return c;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(n){return new i(function(t,e){e(n)})}return new o(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function o(r,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(t){o(r,t)},n)}e[r]=u,0===--i&&t(e)}catch(f){n(f)}}if(0===e.length)return t([]);for(var i=e.length,r=0;r<e.length;r++)o(r,e[r])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":5,asap:2}],8:[function(t,e,n){"use strict";var o=t("./core.js"),i=t("asap");e.exports=o,o.denodeify=function(t,e){return e=e||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments);return new o(function(o,r){for(;i.length&&i.length>e;)i.pop();i.push(function(t,e){t?r(t):o(e)});var u=t.apply(n,i);!u||"object"!=typeof u&&"function"!=typeof u||"function"!=typeof u.then||o(u)})}},o.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,r=this;try{return t.apply(this,arguments).nodeify(n,r)}catch(u){if(null===n||"undefined"==typeof n)return new o(function(t,e){e(u)});i(function(){n.call(r,u)})}}},o.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){i(function(){t.call(e,null,n)})},function(n){i(function(){t.call(e,n)})})}},{"./core.js":5,asap:2}],9:[function(t,e,n){e.exports=function(e){"use strict";var n=t("promise");e.http=function(t){var e,o,i,r,u,s,f,a;if(!t)return new Error("No parameters given");if("string"==typeof t&&(t={url:t}),e=new XMLHttpRequest,o=t.method||"GET",i=t.url,r=JSON.stringify(t.data)||null,u=t.user||"",s=t.password||"",f=t.headers||null,a="boolean"==typeof t.async?t.async:!0,e.onreadystatechange=function(){return 4===e.readyState?e:void 0},e.open(o,i,a,u,s),"POST"===o&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f)for(var c in f)e.setRequestHeader(c,f[c]);if(a)return new n(function(t,n){e.onerror=function(){n(new Error("Network error!"))},e.send(r),e.onload=function(){200===e.status?t(e.response):n(new Error(e.status))}});var l=function(t){var e={then:function(n){return 200===t.status&&n(t.responseText),e},"catch":function(n){return 200!==t.status&&n({status:t.status,statusText:t.statusText}),e}};return e};return e.send(r),e.onloadend=function(){return e.onreadystatechange(),l(e)},e.onloadend()},e.http.get=function(t){return this({url:t,method:"GET"})},e.http.post=function(t,e){return this({url:t,data:e,method:"POST"})}}},{promise:4}],10:[function(t,e,n){e.exports="0.5.2"},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";e.exports={CONTAINER:"styla-widget",TEXT_WRAPPER:"styla-widget__textwrap",HEADLINE:"styla-widget__headline",HEADLINE_WRAPPER:"styla-widget__headlinewrap",IMAGE:"styla-widget__image",IMAGE_WRAPPER:"styla-widget__imagewrap",STORY:"styla-widget__story",PARAGRAPH:"styla-widget__paragraph",STORY_LINK:"styla-widget__link"}},{}],3:[function(t,e,n){"use strict";e.exports="0.0.2"},{}],4:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=t("./version.js"),s=o(u),f=t("./classes.js"),a=o(f),c=t("microbejs/dist/microbe.http.min"),l=function(){function t(e){var n=this,o=e.slug,r=e.domain,u=e.domainConfigAPI,f=e.limit,l=void 0===f?5:f,d=e.offset,p=void 0===d?0:d;i(this,t),this.buildStories=function(t){t=JSON.parse(t);var e=n.container=n.create("DIV",a["default"].CONTAINER),o=function(o){n.domainConfig=o=JSON.parse(o);var i=n.buildStyles(o);if(o.embed.customFontUrl){var r=n.includeFonts(o);document.head.appendChild(r)}var u={},s=t.images;if(s){s.forEach(function(t){u[t.id]=t}),n.images=u;t.stories.map(n.buildStory);document.head.appendChild(i),document.body.appendChild(e)}};return c.http.get(n.domainConfigAPI+n.slug).then(o)["catch"](function(t){console.log(t)}),e},this.buildStory=function(t){var e=t.title,o=t.description,i=t.images,r=t.externalPermalink,u=n.create,s=u("div",a["default"].STORY),f=u("a",a["default"].STORY_LINK),c=u("div",a["default"].IMAGE_WRAPPER),l=u("img",a["default"].IMAGE),d=u("div",a["default"].TEXT_WRAPPER),p=u("div",a["default"].HEADLINE_WRAPPER),h=u("h1",a["default"].HEADLINE),y=u("div",a["default"].PARAGRAPH);y.innerHTML=y.textContent;var v=i[0].id,w=n.images[v];return f.href=n.domain+"story/"+r+"/",l.src=n.getImageUrl(w.fileName,400),l.alt=w.caption||e,l.title=e,h.textContent=e,s.appendChild(f),c.appendChild(l),f.appendChild(c),f.appendChild(d),p.appendChild(h),d.appendChild(p),y.innerHTML=n.getDescription(JSON.parse(o)),d.appendChild(y),n.container.appendChild(s),s},this.slug=o,this.domain=r,this.domainConfigAPI=u,this.version=s["default"];var h="https://www.amazine.com/api/feeds/user/"+o+"?domain="+o+"&offset="+p+"&limit="+l;return c.http.get(h).then(this.buildStories),this}return r(t,[{key:"create",value:function(t,e){var n=document.createElement(t.toUpperCase());return n.className=e,n}},{key:"getDescription",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=t[e];return n?"text"!==n.type?this.getDescription(t,e+1):n.content:!1}},{key:"getImageUrl",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?400:arguments[1];return"//img.styla.com/resizer/sfh_"+e+"x0/_"+t}},{key:"buildStyles",value:function(t){var e=t.theme,n="."+a["default"].HEADLINE+"\n            {\n                font-family:        "+e.hff+";\n                font-weight:        "+e.hfw+";\n                font-style:         "+e.hfs+";\n                text-decoration:    "+e.htd+";\n                letter-spacing:     "+e.hls+";\n                color:              "+e.htc+"\n            }\n            ."+a["default"].PARAGRAPH+"\n            {\n                font-family:        "+e.sff+";\n                font-weight:        "+e.sfw+";\n                color:              "+e.stc+"\n            }\n            ",o=document.createElement("style");o.type="text/css",o.id=a["default"].CONTAINER+"__styling";var i=document.createTextNode(n);return o.appendChild(i),o}},{key:"includeFonts",value:function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t.embed.customFontUrl,e}}]),t}();n["default"]=l,e.exports=n["default"]},{"./classes.js":2,"./version.js":3,"microbejs/dist/microbe.http.min":1}]},{},[4]);
>>>>>>> Stashed changes
