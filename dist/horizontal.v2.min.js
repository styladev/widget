/*! Styla Widget v2.5.0 | (c) 2016-2017 Styla GmbH | https://github.com/styladev/widget/blob/master/license.md */
!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){(function(i){!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.µ=e()}}(function(){return function t(n,i,o){function r(s,l){if(!i[s]){if(!n[s]){var d="function"==typeof e&&e;if(!l&&d)return d(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[s]={exports:{}};n[s][0].call(f.exports,function(e){var t=n[s][1][e];return r(t?t:e)},f,f.exports,t,n,i,o)}return i[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";var i="[object Microbe-Http]",o={},r=e("./version")+"-http";e("./modules/http")(o),Object.defineProperty(o,"version",{get:function(){return r}}),Object.defineProperty(o,"type",{get:function(){return i}}),t.exports=o},{"./modules/http":9,"./version":10}],2:[function(e,t,n){(function(e){function n(){for(;o.next;){o=o.next;var e=o.task;o.task=void 0;var t=o.domain;t&&(o.domain=void 0,t.enter());try{e()}catch(i){if(l)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),i;setTimeout(function(){throw i},0)}t&&t.exit()}a=!1}function i(t){r=r.next={task:t,domain:l&&e.domain,next:null},a||(a=!0,s())}var o={task:void 0,next:null},r=o,a=!1,s=void 0,l=!1;if("undefined"!=typeof e&&e.nextTick)l=!0,s=function(){e.nextTick(n)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=n,s=function(){d.port2.postMessage(0)}}else s=function(){setTimeout(n,0)};t.exports=i}).call(this,e("_process"))},{_process:3}],3:[function(e,t,n){function i(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],4:[function(e,t,n){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(e,t,n){"use strict";function i(e){function t(e){return null===l?void u.push(e):void a(function(){var t=l?e.onFulfilled:e.onRejected;if(null===t)return void(l?e.resolve:e.reject)(d);var n;try{n=t(d)}catch(i){return void e.reject(i)}e.resolve(n)})}function n(e){try{if(e===f)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void r(t.bind(e),n,i)}l=!0,d=e,s()}catch(o){i(o)}}function i(e){l=!1,d=e,s()}function s(){for(var e=0,n=u.length;n>e;e++)t(u[e]);u=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var l=null,d=null,u=[],f=this;this.then=function(e,n){return new f.constructor(function(i,r){t(new o(e,n,i,r))})},r(e,n,i)}function o(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function r(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(o){if(i)return;i=!0,n(o)}}var a=e("asap");t.exports=i},{asap:2}],6:[function(e,t,n){"use strict";var i=e("./core.js"),o=e("asap");t.exports=i,i.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){o(function(){throw e})})}},{"./core.js":5,asap:2}],7:[function(e,t,n){"use strict";function i(e){this.then=function(t){return"function"!=typeof t?this:new o(function(n,i){r(function(){try{n(t(e))}catch(o){i(o)}})})}}var o=e("./core.js"),r=e("asap");t.exports=o,i.prototype=o.prototype;var a=new i(!0),s=new i(!1),l=new i(null),d=new i(void 0),u=new i(0),f=new i("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return l;if(void 0===e)return d;if(e===!0)return a;if(e===!1)return s;if(0===e)return u;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return new i(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(r,e)},n)}t[r]=a,0===--o&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var o=t.length,r=0;r<t.length;r++)i(r,t[r])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":5,asap:2}],8:[function(e,t,n){"use strict";var i=e("./core.js"),o=e("asap");t.exports=i,i.denodeify=function(e,t){return t=t||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments);return new i(function(i,r){for(;o.length&&o.length>t;)o.pop();o.push(function(e,t){e?r(e):i(t)});var a=e.apply(n,o);!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then||i(a)})}},i.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(a){if(null===n||"undefined"==typeof n)return new i(function(e,t){t(a)});o(function(){n.call(r,a)})}}},i.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},{"./core.js":5,asap:2}],9:[function(e,t,n){t.exports=function(t){"use strict";var n=e("promise");t.http=function(e){var t,i,o,r,a,s,l,d;if(!e)return new Error("No parameters given");if("string"==typeof e&&(e={url:e}),t=new XMLHttpRequest,i=e.method||"GET",o=e.url,r=JSON.stringify(e.data)||null,a=e.user||"",s=e.password||"",l=e.headers||null,d="boolean"==typeof e.async?e.async:!0,t.onreadystatechange=function(){return 4===t.readyState?t:void 0},t.open(i,o,d,a,s),"POST"===i&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l)for(var u in l)t.setRequestHeader(u,l[u]);if(d)return new n(function(e,n){t.onerror=function(){n(new Error("Network error!"))},t.send(r),t.onload=function(){200===t.status?e(t.response):n(new Error(t.status))}});var f=function(e){var t={then:function(n){return 200===e.status&&n(e.responseText),t},"catch":function(n){return 200!==e.status&&n({status:e.status,statusText:e.statusText}),t}};return t};return t.send(r),t.onloadend=function(){return t.onreadystatechange(),f(t)},t.onloadend()},t.http.get=function(e){return this({url:e,method:"GET"})},t.http.post=function(e,t){return this({url:e,data:t,method:"POST"})}}},{promise:4}],10:[function(e,t,n){t.exports="0.5.2"},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("/home/dukat/styla/code/widget/src/version"),s=i(a),l=e("/home/dukat/styla/code/widget/src/classes"),d=i(l),u=e("/home/dukat/styla/code/widget/src/build.tmpl"),f=i(u),c=e("microbejs/dist/microbe.http.min"),h="horizontal";h=h[0].toUpperCase()+h.slice(1);var p=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.slug,r=n.api,a=void 0===r?"https://live.styla.com":r,l=n.domain,d=void 0===l?!1:l,u=n.iframe,c=void 0===u?!1:u,p=n.ignore,g=void 0===p?!1:p,y=n.limit,w=void 0===y?5:y,m=n.linkDomain,v=void 0===m?!1:m,_=n.minWidth,b=void 0===_?250:_,x=n.newTab,k=void 0===x?!1:x,T=n.offset,S=void 0===T?0:T,E=n.imageSize,A=void 0===E?400:E,C=n.storiesApi,L=void 0===C?!1:C,j=n.ignoreFonts,N=void 0===j?!1:j,O=n.tag,R=void 0===O?!1:O,P=n.category,z=void 0===P?!1:P,I=n.cta,D=void 0===I?!1:I,H=n.target,M=void 0===H?document.body:H,W=n.urlParams,Y=void 0===W?!0:W,F=n.imageApiDomain,U=void 0===F?"img.styla.com":F;if(o(this,e),M=this.checkTarget(M,b),!i)throw"Styla Widget error: No slug defined, cannot render widget";this.layout=h,this.refs={},this.api=a,this.domain=d,this.linkDomain=v,this.ignore=g,this.iframe=c,this.newTab=k,this.limit=w=g?w+1:w,this.minWidth=b,this.offset=S,this.imageSize=A,this.slug=i,this.storiesApi=L,this.ignoreFonts=N,this.tag=R,this.category=z,this.cta=D,this.target=M,this.urlParams=Y,this.imageApiDomain=U;var G=w+S;R!==!1&&z!==!1&&console.error("Styla Widget error: Both tag and category filter has been added to the configuration, but only one can be used, stories will be filtered only by tag.");var q=void 0;q=0!=R?a+"/api/feeds/tags/"+R+"?limit="+G+"&domain="+i:0!=z?a+"/api/feeds/boards/"+z+"/user/"+i+"?domain="+i:a+"/api/feeds/all?domain="+i+"&limit="+G,this.url=q,this.http.get(L||q).then(function(e){function n(e,t){var i=e.length;return t>=i?e:(e.splice(i-1,1),n(e,t))}e=JSON.parse(e),e.stories=e.stories.slice(S),e.stories=n(e.stories,w),new f["default"](t,e)}),Object.defineProperty(this,"version",{value:s["default"]})}return r(e,[{key:"attach",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target;e=this.checkTarget(e,this.minWidth);var t=this.refs,n=t.styles,i=document.head,o=i.querySelector("."+d["default"].BASE_STYLES);return o&&i.removeChild(o),e.appendChild(t.wrapper),n.forEach(function(e){i.appendChild(e)}),this}},{key:"checkTarget",value:function(e,t){if("string"==typeof e&&(e=document.querySelector(e)))return e;if("undefined"==typeof e||null===e)return console.error("Styla Widget error: Cant find target element in DOM. Widget will render directly in body"),document.body;if(e.offsetWidth<t)throw"Styla Widget error: Target element too small to render widget ¯\\_(ツ)_/¯";return e}}]),r(e,[{key:"destroy",value:function(){var e=this.refs,t=e.styles,n=e.wrapper,i=document.head;return n.parentNode.removeChild(n),t.forEach(function(e){i.removeChild(e)}),this}}]),e}();p.prototype.http=c.http,window["StylaWidget_"+h]=p,Object.defineProperty(p,"version",{value:s["default"]}),n["default"]=p},{"/home/dukat/styla/code/widget/src/build.tmpl":3,"/home/dukat/styla/code/widget/src/classes":4,"/home/dukat/styla/code/widget/src/version":5,"microbejs/dist/microbe.http.min":1}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("/home/dukat/styla/code/widget/src/classes"),s=i(a),l=e("microbejs/dist/microbe.http.min"),d="#styla-widget p{margin:0}#styla-widget.styla-widget__wrapper{width:100%;height:100%}#styla-widget .styla-widget__container{box-sizing:border-box;position:relative;overflow:hidden;height:100%;width:100%;min-height:14em;font-size:14px}#styla-widget .styla-widget__story{margin-bottom:1em;position:relative}#styla-widget .styla-widget__link{position:absolute;width:100%;display:-moz-flex;display:-webkit-flex;display:flex;text-decoration:none;color:inherit}#styla-widget__link>div{display:inline-block}#styla-widget .styla-widget__imagewrap{background-repeat:no-repeat;background-position:50%;background-size:contain}#styla-widget .styla-widget__image{max-height:100%;max-width:100%;height:100%;object-fit:contain;opacity:0}#styla-widget .styla-widget__textwrap{display:block;-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;max-height:100%;overflow:hidden;float:left}#styla-widget .styla-widget__headlinewrap{display:flex;flex-direction:column;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}#styla-widget .styla-widget__headline,#styla-widget .styla-widget__title{line-height:1.25em;max-height:2.5em;overflow:hidden;margin-top:1em;margin-bottom:1em}#styla-widget .styla-widget__title{font-size:2em;text-align:center;margin-bottom:30px}#styla-widget .styla-widget__paragraph{font-size:1em;line-height:1.5em;overflow:hidden;position:relative;word-wrap:break-word}",u="#styla-widget.horizontal .styla-widget__container{padding:1em;display:-moz-flex;display:-ms-flex;display:-webkit-flex;display:flex;-moz-flex-direction:row;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-moz-flex-wrap:wrap;-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;height:16em}#styla-widget.horizontal .styla-widget__story{margin:0 2em 1em;height:14em;width:24em;display:block;float:left;-moz-flex-grow:1;-ms-flex-grow:1;-webkit-flex-grow:1;flex-grow:1}#styla-widget.horizontal .styla-widget__link{height:14em;top:50%;margin-top:-7em;align-items:center}#styla-widget.horizontal .styla-widget__imagewrap{display:block;-moz-flex-grow:1;-ms-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;height:100%;margin:0 6% 0 0;-moz-flex:none;-ms-flex:none;-webkit-flex:none;flex:none;max-width:40%;float:left}#styla-widget.horizontal .styla-widget__textwrap{display:block;max-height:100%;overflow:hidden;float:left}#styla-widget.horizontal .styla-widget__headlinewrap{height:5em;display:-moz-flex;display:-ms-flex;display:-webkit-flex;display:flex;-moz-flex-direction:column;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-moz-justify-content:flex-end;-ms-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}#styla-widget.horizontal .styla-widget__headline{font-size:1.6em;line-height:1.25em;max-height:2.5em;overflow:hidden;margin:0 0 .25em;word-wrap:break-word;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}#styla-widget.horizontal .styla-widget__paragraph{font-size:1em;line-height:1.5em;max-height:7.5em;overflow:hidden;position:relative;word-wrap:break-word}#styla-widget.horizontal .styla-widget__paragraph-after{line-height:1.5em}#styla-widget.horizontal .styla-widget__calltoaction,#styla-widget.horizontal .styla-widget__paragraph p+p{display:none}",f="styla-widget",c=function(){},h=function(){function e(t,n){if(o(this,e),this.context=t,this.now=Date.now(),this.ignored=0,this.buildStories=this.buildStories.bind(this),this.buildStory=this.buildStory.bind(this),this.buildStoryLink=this.buildStoryLink.bind(this),!t.refs.wrapper){t.stories=n;var i=t.layout.toLowerCase();t.refs.container=this.create("DIV",s["default"].CONTAINER+"  styla-widget-"+this.now);var r=t.refs.wrapper=this.create("DIV",s["default"].WRAPPER+"  "+i);r.id=f;var a=t.api+"/api/config/"+t.slug;this.http.get(a).then(this.buildStories)["catch"](c)}return this}return r(e,[{key:"buildHeadline",value:function(e){var t=this.create,n=t("div",s["default"].HEADLINE_WRAPPER),i=t("span",s["default"].HEADLINE);return i.textContent=e,n.appendChild(i),n}},{key:"buildImage",value:function(e,t){var n=this.create,i=n("div",s["default"].IMAGE_WRAPPER),o=this.context.imageSize,r=e[0].id,a=this.context.images[r],l=this.getImageUrl(a.fileName,o);i.style.cssText="background-image: url("+l+")";var d=n("img",s["default"].IMAGE);return d.src=l,d.alt=a.caption||t,d.title=t,i.appendChild(d),i}},{key:"buildStories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",t=this.domainConfig=JSON.parse(e);if(0===Object.keys(t).length)throw"Styla Widget error: Could not find magazine, please check if slug is configured correctly.";var n={},i=this.context,o=i.stories,r=o.images,a=i.refs;if(i.routesOle=t.routes,i.routesNle=t.embed.routes,i.pushstate=t.embed.pushstateDefault===!1?"#":"/",i.domain=this.setDomain(),a.styles=this.includeBaseStyles(),r){r.forEach(function(e){return n[e.id]=e}),i.images=n,o.stories.forEach(this.buildStory);var s=this.compileStyles();return document.head.appendChild(s),i.target.appendChild(i.refs.wrapper),a.wrapper}return!1}},{key:"buildStory",value:function(e){var t=e.title,n=e.description,i=e.id,o=e.images,r=e.externalPermalink,a=e.boards,l=void 0===a?[]:a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=this.context;if(0!=u.ignore&&d==u.limit-1&&0==this.ignored)return!1;if(""+u.ignore!=""+i&&d<this.ignored+u.limit){var f=this.create,c=f("div",s["default"].STORY),h=f("a",s["default"].STORY_LINK);if(h.href=this.buildStoryLink(r,l),c.appendChild(h),h.appendChild(this.buildImage(o,t)),h.appendChild(this.buildStoryText(t,n)),u.cta){var p=f("div",s["default"].CALL_TO_ACTION);p.innerHTML=u.cta,h.appendChild(p)}var g=u.refs.container,y=u.refs.wrapper;return g.appendChild(c),y.appendChild(g),c}return this.ignored++,!1}},{key:"buildStoryLink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.context,i=encodeURIComponent(n.layout),o=encodeURIComponent(window.location.href),r=n.urlParams?"?styla_ref="+o+"&styla_wdgt_var="+i:"",a=void 0;if(n.routesNle){var s=t[0]&&t[0].slug||"no-category";a=n.routesNle.magazine?n.routesNle.magazine.path:"",a=(a+n.routesNle.story.path.replace(/:storySlug/,e).replace(/:categorySlug/,s)).substring(1)}return n.routesOle&&(a=n.routesOle.story.replace(/%2\$s_%3\$s/,e)),n.routesOle&&n.routesNle&&console.warn("Both old and new routes defined in config. Ignoring new route."),"//"+n.domain+n.pushstate+a+r}},{key:"buildStoryText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}",n=this.create,i=n("div",s["default"].TEXT_WRAPPER),o=this.buildHeadline(e);i.appendChild(o);var r=n("div",s["default"].PARAGRAPH);t=this.getDescription(JSON.parse(t)),r.innerHTML=t,r.innerHTML=r.textContent.slice(0,220),i.appendChild(r);var a=n("div",s["default"].PARAGRAPH_AFTER);return a.innerHTML="…",i.appendChild(a),i}},{key:"buildStyleTag",value:function(e){var t=document.createElement("style");t.type="text/css",t.className=s["default"].STYLES;var n=document.createTextNode(e);return t.appendChild(n),t}},{key:"compileStyles",value:function(){var e=this.domainConfig.theme,t="",n=this.now,i=this.context;e&&(t="#styla-widget .styla-widget-"+n+" ."+s["default"].HEADLINE+"\n                {\n                    font-family:        "+e.hff+";\n                    font-weight:        "+e.hfw+";\n                    font-style:         "+e.hfs+";\n                    text-decoration:    "+e.htd+";\n                    letter-spacing:     "+e.hls+";\n                    color:              "+e.htc+";\n                }\n                #styla-widget .styla-widget-"+n+" ."+s["default"].PARAGRAPH+",\n                #styla-widget .styla-widget-"+n+" ."+s["default"].PARAGRAPH_AFTER+",\n                #styla-widget .styla-widget-"+n+" ."+s["default"].CALLTOACTION+"\n                {\n                    font-family:        "+e.sff+";\n                    font-weight:        "+e.sfw+";\n                    color:              "+e.stc+";\n                }\n                #styla-widget .styla-widget-"+n+" ."+s["default"].CALLTOACTION+"\n                {\n                    color:              "+e.ltc+";\n                }");var o=this.buildStyleTag(t);return o.className=s["default"].THEME_STYLES+"  styla-widget__"+i.layout,i.refs.themeStyle=o,o}}]),r(e,[{key:"create",value:function(e,t){var n=document.createElement(e.toUpperCase());return t&&(n.className=t),n}},{key:"getDescription",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e[n];if(!i)return"";var o=this.create("div");o.innerHTML=i.content;var r=o.textContent,a="text"==i.type&&""!==r;return a?t?r+" "+this.getDescription(e,t,n+1):r:this.getDescription(e,t,n+1)}},{key:"getImageUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=this.context.imageApiDomain;return"//"+n+"/resizer/sfh_"+t+"x0/_"+e+"?still"}},{key:"includeBaseStyles",value:function(e){function t(e,t,r){var l=a.querySelector("."+t);return l||(n=i.buildStyleTag(e),n.className=t+"  "+s["default"].STYLES,o.refs[r+"Style"]=n,a.appendChild(n)),n}var n=void 0,i=this,o=this.context,r=o.layout.toUpperCase(),a=document.head,l=new Array(2);return l[0]=t(e||d,""+s["default"].BASE_STYLES,"base"),l[1]=t(u,s["default"][r+"_STYLES"],o.layout),this.domainConfig.embed.customFontUrl&&l.push(this.includeFonts()),l=l.filter(function(e){return e})}},{key:"includeFonts",value:function(){var e=this.context.ignoreFonts;if(!e){var t=document.createElement("link");t.className=s["default"].FONT_LINK,t.type="text/css",t.rel="stylesheet";var n=this.domainConfig.embed.customFontUrl;return t.href=-1!==n.indexOf("//")?n:"//"+n,document.head.appendChild(t),t}}},{key:"setDomain",value:function(){var e=this.domainConfig.embed,t=this.context,n=void 0;if(!t.domain){if(t.linkDomain)n=t.linkDomain;else{if(!e)throw"Styla Widget error: No domain defined or bad domain config.";var i=e.rootPath;"/"!==i[0]&&(i="/"+i),i.length>1&&"/"==i[i.length-1]&&(i=i.substring(0,i.length-1)),"/"===i&&(i=""),n=""+e.magazineUrl+i}return n=n.replace(/^(http(s)?:)?\/\//,""),t.domain=n}return t.domain}}]),e}();h.prototype.http=l.http,n["default"]=h},{"/home/dukat/styla/code/widget/src/classes":4,"microbejs/dist/microbe.http.min":1}],4:[function(e,t,n){"use strict";t.exports={BASE_STYLES:"styla-widget__base-styling",CALL_TO_ACTION:"styla-widget__calltoaction",CONTAINER:"styla-widget__container",FONT_LINK:"styla-widget__font-link",HEADLINE:"styla-widget__headline",HEADLINE_WRAPPER:"styla-widget__headlinewrap",HORIZONTAL_STYLES:"styla-widget__horizontal-styling",IMAGE:"styla-widget__image",IMAGE_WRAPPER:"styla-widget__imagewrap",LIST_STYLES:"styla-widget__list-styling",PARAGRAPH:"styla-widget__paragraph",PARAGRAPH_AFTER:"styla-widget__paragraph-after",STORIES_STYLES:"styla-widget__stories-styling",STORY:"styla-widget__story",STORY_LINK:"styla-widget__link",STYLES:"styla-widget__styling",TEXT_WRAPPER:"styla-widget__textwrap",THEME_STYLES:"styla-widget__theme-styling",TILES_STYLES:"styla-widget__tiles-styling",TITLE:"styla-widget__title",WRAPPER:"styla-widget__wrapper"}},{}],5:[function(e,t,n){"use strict";t.exports="2.5.0"},{}]},{},[2]);